<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é—œéµå­—è¢å…‰ç­† Pro - æ–‡ä»¶ç·¨è¼¯å™¨ç‰ˆ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { font-family: 'Inter', system-ui, sans-serif; background-color: #f3f4f6; }
    .toolbar-btn { p: 2; border-radius: 4px; hover: bg-gray-200; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
    .editor-container { min-height: 600px; font-size: 16px; line-height: 1.8; padding: 40px; background: white; outline: none; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    /* æ»‘æ¡¿æ°£æ³¡å„ªåŒ– */
    .slider-bubble { position: absolute; top: -35px; left: 50%; transform: translateX(-50%); background: #374151; color: white; padding: 2px 8px; border-radius: 6px; font-size: 14px; font-weight: bold; }
    .swatch-grid { display: none; position: absolute; top: 100%; left: 0; background: white; border: 1px solid #ddd; padding: 8px; grid-template-columns: repeat(4, 1fr); gap: 4px; z-index: 50; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    .group:hover .swatch-grid { display: grid; }
    .swatch-item { width: 24px; height: 24px; border-radius: 4px; cursor: pointer; border: 1px solid #eee; }
  </style>
</head>
<body class="h-screen flex flex-col">

  <header class="bg-white border-b px-6 py-3 flex justify-between items-center shrink-0">
    <div class="flex items-center gap-3">
      <div class="bg-indigo-600 p-2 rounded-lg text-white"><i data-lucide="highlighter"></i></div>
      <h1 class="text-xl font-bold text-slate-800">é—œéµå­—è¢å…‰ç­† Pro</h1>
    </div>
    <button onclick="copyToDocs()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-lg font-bold flex items-center gap-2 transition-all active:scale-95">
      <i data-lucide="share"></i> è¤‡è£½ (Google Docs)
    </button>
  </header>

  <main class="flex-1 flex overflow-hidden">
    <div class="w-1/3 border-r bg-slate-50 overflow-y-auto p-6 space-y-8">
      <section>
        <h2 class="text-sm font-black text-slate-500 mb-3 flex items-center gap-2 uppercase tracking-wider">
          <i data-lucide="file-text" class="w-4 h-4"></i> 1. ä¾†æºå…§å®¹ (SOURCE)
        </h2>
        <textarea id="sourceText" oninput="syncPreview()" class="w-full h-48 p-4 border rounded-xl text-base focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm" placeholder="åœ¨æ­¤è¼¸å…¥æˆ–è²¼ä¸ŠåŸå§‹æ–‡ç« ..."></textarea>
      </section>

      <section>
        <h2 class="text-sm font-black text-slate-500 mb-3 flex items-center gap-2 uppercase tracking-wider">
          <i data-lucide="list" class="w-4 h-4"></i> 2. é—œéµå­—æ¸…å–® (USER LIST)
        </h2>
        <div class="bg-white p-4 rounded-xl border space-y-4 shadow-sm">
          <textarea id="kwList" class="w-full h-24 p-3 border rounded-lg text-sm outline-none focus:border-indigo-400" placeholder="æ¯è¡Œè¼¸å…¥ä¸€å€‹é—œéµå­—..."></textarea>
          <button onclick="runAutoMark()" class="w-full bg-rose-500 hover:bg-rose-600 text-white py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-colors">
            <i data-lucide="zap"></i> ä¸€éµç´…å­—åŠ ç²— (RED)
          </button>
          <button onclick="clearAllMarks()" class="w-full bg-slate-100 hover:bg-slate-200 text-slate-600 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2">
            <i data-lucide="trash-2"></i> æ¸…é™¤æ‰€æœ‰æ‰‹å‹•æ¨™è¨»
          </button>
        </div>
      </section>
    </div>

    <div class="flex-1 flex flex-col bg-white">
      <div class="bg-slate-50 border-b px-4 py-2 flex items-center gap-1 flex-wrap shrink-0">
        <button onclick="cmd('undo')" class="toolbar-btn" title="å¾©åŸ"><i data-lucide="undo-2" class="w-5 h-5"></i></button>
        <button onclick="cmd('redo')" class="toolbar-btn" title="é‡åš"><i data-lucide="redo-2" class="w-5 h-5"></i></button>
        <div class="w-px h-6 bg-slate-300 mx-2"></div>
        
        <button onclick="alert('æ ¼å¼åˆ·å·²å•Ÿå‹•')" class="toolbar-btn" title="æ ¼å¼åˆ·"><i data-lucide="brush" class="w-5 h-5"></i></button>
        <div class="w-px h-6 bg-slate-300 mx-2"></div>

        <div class="flex items-center gap-2 bg-white border rounded px-2 py-1 relative group">
          <button onclick="adjustSize(-1)" class="hover:text-indigo-600"><i data-lucide="minus" class="w-4 h-4"></i></button>
          <span id="fontSizeDisplay" class="text-sm font-bold w-10 text-center">12pt</span>
          <button onclick="adjustSize(1)" class="hover:text-indigo-600"><i data-lucide="plus" class="w-4 h-4"></i></button>
          <div class="absolute top-full left-0 mt-2 w-48 bg-white border p-3 rounded-lg shadow-xl hidden group-hover:block z-50">
            <input type="range" id="sizeSlider" min="10" max="48" value="12" class="w-full h-1 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600" oninput="updateFontSize(this.value)">
          </div>
        </div>

        <div class="w-px h-6 bg-slate-300 mx-2"></div>

        <button onclick="cmd('bold')" class="toolbar-btn font-bold px-3">B</button>
        <button onclick="cmd('italic')" class="toolbar-btn italic px-3">I</button>
        <button onclick="cmd('underline')" class="toolbar-btn underline px-3">U</button>

        <div class="w-px h-6 bg-slate-300 mx-2"></div>

        <div class="relative group">
          <button class="toolbar-btn flex flex-col items-center">
            <i data-lucide="baseline" class="w-5 h-5"></i>
            <div class="h-1 w-5 bg-black" id="textColorIndicator"></div>
          </button>
          <div class="swatch-grid">
            <div class="swatch-item bg-black" onclick="applyColor('#000000')"></div>
            <div class="swatch-item bg-red-500" onclick="applyColor('#EF4444')"></div>
            <div class="swatch-item bg-blue-500" onclick="applyColor('#3B82F6')"></div>
            <div class="swatch-item bg-green-500" onclick="applyColor('#22C55E')"></div>
          </div>
        </div>

        <div class="relative group">
          <button class="toolbar-btn flex flex-col items-center">
            <i data-lucide="highlighter" class="w-5 h-5"></i>
            <div class="h-1 w-5 bg-yellow-200" id="bgColorIndicator"></div>
          </button>
          <div class="swatch-grid">
            <div class="swatch-item bg-yellow-200" onclick="applyHighlight('#FEF08A')"></div>
            <div class="swatch-item bg-blue-200" onclick="applyHighlight('#BAE6FD')"></div>
            <div class="swatch-item bg-green-200" onclick="applyHighlight('#BBF7D0')"></div>
            <div class="swatch-item bg-pink-200" onclick="applyHighlight('#FBCFE8')"></div>
            <div class="swatch-item border-2 border-slate-200" onclick="applyHighlight('transparent')" title="æ¸…é™¤">âœ•</div>
          </div>
        </div>

        <div class="w-px h-6 bg-slate-300 mx-2"></div>

        <button onclick="preset('TITLE')" class="text-xs font-bold px-2 py-1 border rounded hover:bg-slate-200">æ¨™é¡Œ</button>
        <button onclick="preset('SUB')" class="text-xs font-bold px-2 py-1 border rounded hover:bg-slate-200 mx-1">å‰¯æ¨™</button>
        <button onclick="preset('BODY')" class="text-xs px-2 py-1 border rounded hover:bg-slate-200">å…§æ–‡</button>
      </div>

      <div class="flex-1 overflow-y-auto bg-slate-200 p-8 flex justify-center">
        <div id="editor" contenteditable="true" class="editor-container w-[210mm] shadow-2xl" placeholder="å³æ™‚é è¦½å…§å®¹å°‡é¡¯ç¤ºæ–¼æ­¤..."></div>
      </div>
    </div>
  </main>

  <script>
    lucide.createIcons();
    const editor = document.getElementById('editor');
    const source = document.getElementById('sourceText');
    const fontSizeDisplay = document.getElementById('fontSizeDisplay');

    function syncPreview() { editor.innerText = source.value; }
    
    function cmd(c) { document.execCommand(c, false, null); editor.focus(); }

    function updateFontSize(val) {
      fontSizeDisplay.innerText = val + 'pt';
      document.execCommand('fontSize', false, '7');
      const fonts = editor.getElementsByTagName('font');
      for (let f of fonts) { if (f.size === "7") { f.removeAttribute('size'); f.style.fontSize = val + 'pt'; } }
      editor.focus();
    }

    function adjustSize(delta) {
      let current = parseInt(fontSizeDisplay.innerText);
      updateFontSize(current + delta);
    }

    function applyColor(c) {
      document.execCommand('foregroundColor', false, c);
      document.getElementById('textColorIndicator').style.backgroundColor = c;
    }

    function applyHighlight(c) {
      document.execCommand('hiliteColor', false, c);
      document.getElementById('bgColorIndicator').style.backgroundColor = c;
    }

    function preset(type) {
      if(type === 'TITLE') { updateFontSize(18); document.execCommand('bold'); }
      else if(type === 'SUB') { updateFontSize(14); document.execCommand('bold'); }
      else { updateFontSize(12); }
    }

    function runAutoMark() {
      const list = document.getElementById('kwList').value.split('\n').filter(t => t.trim() !== "");
      let html = editor.innerHTML;
      list.forEach(kw => {
        const regex = new RegExp(`(${kw})`, 'g');
        html = html.replace(regex, `<span style="color:#EF4444; font-weight:bold;">$1</span>`);
      });
      editor.innerHTML = html;
    }

    function clearAllMarks() { editor.innerHTML = editor.innerText; }

    async function copyToDocs() {
      const blob = new Blob([editor.innerHTML], { type: 'text/html' });
      const data = [new ClipboardItem({ 'text/html': blob, 'text/plain': new Blob([editor.innerText], { type: 'text/plain' }) })];
      await navigator.clipboard.write(data);
      alert('ğŸ‰ æ ¼å¼å·²è¤‡è£½ï¼è«‹è‡³ Google Docs è²¼ä¸Š (Ctrl+V)ã€‚');
    }
  </script>
</body>
</html>
